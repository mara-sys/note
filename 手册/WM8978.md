## 14. 设备描述
### 介绍
WM8978是一种低功耗音频编解码器，结合了高质量立体声音频DAC和ADC，具有灵活的线路和麦克风输入和输出处理。该设备的应用包括立体声数码摄像机和具有单声道或立体声录制和播放功能的数码相机。
### 特性
该芯片具有极大的使用灵活性，因此可以支持以下多种不同的操作模式：
#### 麦克风输入
提供两对立体声麦克风输入，允许一对立体声麦克风伪差分连接，使用内部电阻器实现用户定义的增益。为每个立体声输入提供共模输入引脚允许抑制麦克风输入上的共模噪声（电平取决于所选的增益设置）。从芯片输出麦克风偏置，可用于偏置两个麦克风。信号路由可以被配置为允许手动调节麦克风电平，或者实际上允许ALC环路控制发送的麦克风信号的电平。
可选择通过麦克风路径的总增益高达+55.25dB。
#### PGA和ALC操作
在ADC的输入路径中提供可编程增益放大器。这可以手动使用，也可以与保持记录音量恒定的混合模拟/数字自动电平控制（ALC）结合使用。

#### 线路输入（AUXL、AUXR）
输入AUXL和AUXR可以用作立体声线路输入或警告音（或“哔哔声”）等输入。这些输入可以与麦克风前置放大器输出一起汇总到记录路径中，以便根据需要将音频与“背景音乐”等混合。

#### ADC
立体声ADC使用多位高阶过采样架构，以低功耗提供最佳性能。

#### HI-FI DAC
高保真DAC提供适合所有便携式音频高保真类型应用的高质量音频播放，包括MP3播放器和各种类型的便携式光盘播放器。

#### 输出混频器
设备的输出端提供了灵活的混合。为立体声耳机或线路输出LOUT1/ROUT1提供立体声混音器，OUT3/OUT4输出上的附加加法器允许这些引脚上的可选差分或立体声线路输出。为LOUT1/ROUT1和LOUT2/ROUT2输出提供增益调节PGA，并提供信号切换以允许所有可能的信号组合。输出缓冲器可以多种方式配置，最多支持三组外部传感器；即立体声耳机、BTL扬声器和BTL耳机可以同时连接。在尝试同时全功率运行所有输出之前，应考虑热影响。
或者，如果不需要扬声器输出，LOUT2和ROUT2引脚可以用作立体声耳机驱动器（禁用ROUT2上的输出反相缓冲区）。在这种情况下，可以驱动两组耳机，或者将LOUT2和ROUT2引脚用作线路输出
OUT3和OUT4可以被配置为从DAC、混频器或输入麦克风升压级的输出提供额外的立体声线路输出。可选地，OUT4可以被配置为左和右DAC或混频器的单声道混合，或者仅仅是芯片中轨参考电压的缓冲版本。OUT3也可以配置为缓冲VMID输出。然后，该电压可以用作耳机的“伪接地”，允许去除输出路径中经常使用的大AC耦合电容器。

#### 音频接口
WM8978具有标准音频接口，支持芯片之间的立体声数据传输。该接口是一个3线标准音频接口，支持多种音频数据格式，包括I2S、DSP/PCM模式（传输LRC同步加2个数据压缩字的突发模式）、MSB优先、左对齐和MSB优先和右对齐，并可以在主模式或从模式下操作。

#### 控制接口
为了实现对所有功能的完全软件控制，WM8978提供了2线或3线MPU控制接口。它完全兼容，是各种工业标准微处理器、控制器和DSP的理想合作伙伴。
通过MODE引脚在模式之间进行选择。在双线模式下，设备的地址固定为0011010。

#### 时钟方案
WM8978提供正常的音频DAC时钟方案操作，其中256fs MCLK被提供给DAC和ADC。
包括PLL，该PLL可用于在系统控制器不提供这些时钟的情况下生成这些时钟。该PLL使用输入时钟（通常为12MHz USB或ilink时钟）生成高质量音频时钟。如果生成这些时钟不需要该PLL，则可以重新配置该PLL以生成替代时钟，该替代时钟随后可以在GPIO引脚上输出并在系统的其他地方使用。

#### 电源控制
WM8978的设计在不影响性能的情况下非常注重功耗。它在非常低的电压下工作，包括在软件控制下关闭电路的任何未使用部分的能力，并包括待机和断电模式。

#### 操作场景
WM8978设计的灵活性允许多种操作场景，其中一些场景建议如下：
立体摄像机；提供两个立体声麦克风前置放大器，支持内部和外部麦克风。扬声器、耳机和线路输出连接的所有驱动程序均已集成。ADC之后的可选“应用滤波器”提供了诸如“风噪声”降低或机械噪声降低滤波器等功能。
立体声数字静态摄像机录制；对数字立体声录制的支持与摄像机外壳类似。但另外，如果DSC支持MP3播放，并可能支持录音，则ADC支持完整48ks/s高质量立体声录音的能力增加了设备的灵活性。
单声道数码静态相机；提供对设备功能的完全控制和电源控制，允许在单声道DSC录制的情况下，禁用一半ADC和麦克风以及线路功能以节省电源。在单声道情况下，当使用正常的I2S类型接口格式时，音频数据的单个ADC通道通过音频接口的左通道和右通道发送。在使用DSP模式且正在发送单声道数据的情况下，仅发送单声道信号信道。

#### 模拟调频调谐器支持
一个模拟立体声调频调谐器可以连接到WM8978的线路输入端，立体声信号可以通过耳机收听，也可以根据需要同时录制。

















